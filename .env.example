# ==============================================
# K6 PERFORMANCE TESTING FRAMEWORK
# Environment Configuration Template
# ==============================================
#
# INSTRUCTIONS:
# 1. Copy this file to .env: cp .env.example .env
# 2. Fill in the values for your environment
# 3. Never commit .env to the repository
#
# ==============================================

# ==============================================
# ENVIRONMENT URLS
# ==============================================
# Configure URLs for each environment (local, dev, staging, prod)
# The test will use the corresponding environment based on the command:
#   npm run smoke        -> uses LOCAL_*
#   npm run smoke:dev    -> uses DEV_*
#   npm run smoke:staging -> uses STAGING_*
#   npm run smoke:prod   -> uses PROD_*

# LOCAL ENVIRONMENT
LOCAL_BASE_URL=https://your-local-url.com
LOCAL_PATH=/api-path
LOCAL_TIMEOUT=60s

# Traffic Monitoring (REST API) - LOCAL
LOCAL_AUTH_URL=https://your-auth-url.com/token
LOCAL_TRAFFIC_URL=https://your-traffic-url.com/endpoint
LOCAL_CLIENT_ID=your-client-id
LOCAL_CLIENT_SECRET=your-client-secret
LOCAL_AUTH_GRANT_TYPE=password
LOCAL_AUTH_USERNAME=your-username
LOCAL_AUTH_PASSWORD=your-password

# DEV ENVIRONMENT
DEV_BASE_URL=https://your-dev-url.com
DEV_PATH=/api-path
DEV_TIMEOUT=60s
DEV_AUTH_URL=https://your-dev-auth-url.com/token
DEV_TRAFFIC_URL=https://your-dev-traffic-url.com/endpoint
DEV_CLIENT_ID=your-client-id
DEV_CLIENT_SECRET=your-client-secret

# STAGING ENVIRONMENT
STAGING_BASE_URL=https://your-staging-url.com
STAGING_PATH=/api-path
STAGING_TIMEOUT=90s
STAGING_AUTH_URL=https://your-staging-auth-url.com/token
STAGING_TRAFFIC_URL=https://your-staging-traffic-url.com/endpoint
STAGING_CLIENT_ID=your-client-id
STAGING_CLIENT_SECRET=your-client-secret

# PROD ENVIRONMENT
PROD_BASE_URL=https://your-prod-url.com
PROD_PATH=/api-path
PROD_TIMEOUT=120s
PROD_AUTH_URL=https://your-prod-auth-url.com/token
PROD_TRAFFIC_URL=https://your-prod-traffic-url.com/endpoint
PROD_CLIENT_ID=your-client-id
PROD_CLIENT_SECRET=your-client-secret

# ==============================================
# TEST CONFIGURATION
# ==============================================
# Configure load parameters for each test type

# SMOKE TEST - Basic functionality check (~15s)
# Verifies the system works with minimal load
SMOKE_DURATION=15s
SMOKE_VUS=1

# LOAD TEST - Sustained normal load (~9min)
# Tests expected production traffic levels
LOAD_START_RATE=1
LOAD_PRE_VUS=30
LOAD_MAX_VUS=200
LOAD_TARGET_RPS=10

# STRESS TEST - Find breaking point (~7min)
# Gradually increases load until failure
STRESS_START_RPS=2
STRESS_PRE_VUS=50
STRESS_MAX_VUS=300
STRESS_GRACEFUL_STOP=30s

# CAPACITY TEST - Maximum healthy capacity (~7min)
# Finds the max load where system remains healthy
CAPACITY_START_RPS=2
CAPACITY_PRE_VUS=50
CAPACITY_MAX_VUS=300
CAPACITY_GRACEFUL_STOP=30s

# SPIKE TEST - Traffic bursts (~5min)
# Tests sudden traffic spikes
SPIKE_START_VUS=1
SPIKE_MAX_VUS=100
SPIKE_GRACEFUL_STOP=30s

# SOAK TEST - Long-term stability (30min+)
# Tests memory leaks and stability over time
SOAK_VUS=10
SOAK_DURATION=30m
SOAK_GRACEFUL_STOP=30s

# SIZE TEST - Payload limits
# Tests maximum request/response sizes
SIZE_START_MB=0.5
SIZE_MAX_MB=64
SIZE_STEP_MODE=double
SIZE_STEP_MB=1
SIZE_VUS=1
SIZE_TIMEOUT=180s
SIZE_SLEEP=0.2

# COMBINED TEST - SOAP + Traffic Monitoring in parallel (~5min)
# Tests both services simultaneously with constant RPS
#
# SOAP Service Configuration:
COMBINED_SOAP_RPS=10              # Requests per second for SOAP
COMBINED_SOAP_DURATION=5m         # Test duration
COMBINED_SOAP_VUS=20              # Pre-allocated virtual users
COMBINED_SOAP_MAX_VUS=50          # Maximum VUs if needed
#
# Traffic Monitoring Configuration:
COMBINED_TRAFFIC_RPS=5            # Requests per second for Traffic
COMBINED_TRAFFIC_DURATION=5m      # Test duration
COMBINED_TRAFFIC_VUS=10           # Pre-allocated virtual users
COMBINED_TRAFFIC_MAX_VUS=30       # Maximum VUs if needed

# ==============================================
# THRESHOLDS (ACCEPTANCE LIMITS)
# ==============================================
# Define pass/fail criteria for each test type
# FAILED_RATE: Maximum allowed error rate (0.01 = 1%)
# P95_DURATION: 95th percentile response time in ms
# P99_DURATION: 99th percentile response time in ms

# Smoke Test Thresholds
SMOKE_THRESHOLD_FAILED_RATE=0.01
SMOKE_THRESHOLD_P95_DURATION=2000
SMOKE_THRESHOLD_P99_DURATION=3000

# Load Test Thresholds
LOAD_THRESHOLD_FAILED_RATE=0.10
LOAD_THRESHOLD_P95_DURATION=10000
LOAD_THRESHOLD_P99_DURATION=15000

# Stress Test Thresholds
STRESS_THRESHOLD_FAILED_RATE=0.05
STRESS_THRESHOLD_P95_DURATION=45000
STRESS_THRESHOLD_P99_DURATION=60000

# Capacity Test Thresholds
CAPACITY_THRESHOLD_FAILED_RATE=0.01
CAPACITY_THRESHOLD_P95_DURATION=2000
CAPACITY_THRESHOLD_P99_DURATION=5000

# Spike Test Thresholds
SPIKE_THRESHOLD_FAILED_RATE=0.15
SPIKE_THRESHOLD_P95_DURATION=20000
SPIKE_THRESHOLD_P99_DURATION=30000

# Soak Test Thresholds
SOAK_THRESHOLD_FAILED_RATE=0.05
SOAK_THRESHOLD_P95_DURATION=8000
SOAK_THRESHOLD_P99_DURATION=12000
SOAK_THRESHOLD_AVG_DURATION=5000

# Size Test Thresholds
SIZE_THRESHOLD_FAILED_RATE=0.20
SIZE_THRESHOLD_P95_DURATION=45000

# Combined Test Thresholds
COMBINED_THRESHOLD_FAILED_RATE=0.30
COMBINED_SOAP_THRESHOLD_P95_DURATION=30000
COMBINED_TRAFFIC_THRESHOLD_P95_DURATION=5000

# ==============================================
# REPORT CONFIGURATION
# ==============================================
REPORTS_DIR=reports
JSON_DIR=reports/json
ALLURE_RESULTS_DIR=reports/allure-results
ALLURE_REPORT_DIR=reports/allure-report
